<html>
<head>
  <title>Demo of Static.JS</title>
  <script src="./static.js"></script>
</head>
<body>
  <div id="app"></div>

  <script>
    const {$component, $app} = window.StaticJs;

    const blueprint_b = $component("#b");
    const plug_b = state => blueprint_b`<ul><li>Name ${state.name}</li></ul>`;
    let state_b = { name: 'hey' };
    const component_b = plug_b(state_b);

    const blueprint_a = $component("#a");
    const plug_a = state => blueprint_a`
      <ul>
        <li>Time ${state.time}</li>
        <li>Random:${state.random}</li>
      </ul>`;
    let state_a = {
      random: 5,
      time: 7,
    };
    const component_a = plug_a(state_a);

    const blueprint_app = $app(document.getElementById('app'));
    let plug = state => blueprint_app`
      <ul>
        <li>
          Her name is here: ${state.first}, ${state.last}.
        </li>a
        <li>Ternary Expression: ${state.first == 'Amanda' ? 'First, Last' : 'Last, First'}
        <li>${state.children}</li>
      </ul>`; // TODO: bug with trailing whitespace, or any character after last
    let state = {
      first: 'Amanda',
      last: 'Bob',
      children: [component_a, component_b]
    };

    setInterval(() => {
      state = Object.assign(state, {
        children: [
          state.children[1],
          state.children[0]
        ]
      });
      plug(state);
    }, 3000);

    setInterval(() => {
      state_b = Object.assign(state_b, { time: Date.now(), random: Math.random() });
      plug_b(state_b);
    }, 500);
  </script>
</body>
</html>